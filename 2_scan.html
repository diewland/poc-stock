<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name='description' content='POV Stock System'>
    <title>POC Stock System</title>
    <style type='text/css'>
      #barcodevideo, #barcodecanvas, #barcodecanvasg {
        height: 200px;
        width: 100%;
      }	
      #barcodecanvasg {
        position: absolute;
        top: 0px;
        left: 0px;
      }
      #barcode {
        position: relative;
      }	
      #barcodecanvas {
        display: none;
      }
    </style>
  </head>
  <body>
    <h1>POC Stock</h1>
    <hr>
    <h2>(2/4) Scan Barcode</h2>
    <div id="barcode">
      <video id="barcodevideo" autoplay></video>
      <canvas id="barcodecanvasg" ></canvas>
    </div>
    <canvas id="barcodecanvas" ></canvas>
    <div id="result"></div>
    <hr>
    <input id='submit' type='button' value='Submit'>

    <!-- bottom script -->
    <script src='js/jquery-3.2.1.min.js'></script>
    <script src='js/barcode.js'></script>
    <script>
      // barcode - http://www.webondevices.com/javascript-barcode-scanner/
      var sound = new Audio("js/barcode.wav");
      barcode.config.start = 0.1;
      barcode.config.end = 0.9;
      barcode.config.video = '#barcodevideo';
      barcode.config.canvas = '#barcodecanvas';
      barcode.config.canvasg = '#barcodecanvasg';
      barcode.setHandler(function(barcode) {
        $('#result').html(barcode);
      });
      barcode.init();
      $('#result').bind('DOMSubtreeModified', function(e) {
        sound.play();	
      });

      // submit
      $('#submit').click(function(){
        localStorage.setItem('poc_stock_scan', $('#result').html());
        location.href = '3_sign.html';
      });
    </script>
  </body>
</html>
